# 基幹システム　⇒　kintone

## 目的

- Vendor Potalに必要な業務データをKintoneへ連携する

## 前提条件

- 原則、基幹システムの業務データのうち、追加・変更・削除された差分データを連携する
- 連携タイミングは、Vendor Potal業務要件によって決定する
- 連携するcsvデータは、M365 Onedrive/SharePoint を利用する。  [krew Dataサービス](https://docs.krew.mescius.jp/krewdata/#krewdatatop.html)
がサポートするサービス
   
## データ連携概要
### 範囲

基幹システム業務データをベンダーポータルへ連携する、ベンダーポータルから基幹システムのデータ連携は、RPAを利用し基幹システム画面機能から入力する

![image](https://github.com/ShopChannelIT/Vendor-Potal-Systme/assets/88366591/44ef54d3-2c70-4220-8125-a5f5cca4f72b)



### 基幹システム⇒CSVルール
| 項目 | 内容 | ポイント |
| - | - | - |
| データ連携要件 | 基幹システム業務データのうち、日々差分(追加・変更・削除データ)を所定フォルダへcsv形式で作成する | OneDrive or SharePoint |
| 連携データ作成方針 | 原則、DB定義書のレイアウトとおり作成する<br><br>-.リソース系データ：一意のキー単位へ加工し全項目を連携する。削除済データも連携する<br><br>-.イベント系データ：ヘッダーと明細を結合し全項目を連携する。データ内の外部キー項目の結合はしない、削除済データも連携する | 各データの一意のキーは■データ詳細参照<br><br>-.リソース系データ抽出条件<br>■データ詳細参照<br>-.イベント系データ抽出条件<br>■データ詳細参照 |
| 区分・フラグ・コード | リソースデータが存在しない区分値やフラグ等は、区分・名称管理マスターをCSV連携する | 区分・名称マスター参照ルールは別途記載する |
| 連携頻度 | ■データ詳細参照 | 18:00~翌9:30、土日は連携しない |
| CSV命名ルール<br>CSV更新方法 | 基幹システムの命名ルールに沿う | csvファイルの削除方法 |
| CSVファイルの文字コード | UTF-8 |  |

### データ詳細

| № | 業務データ | 論理名 | 分類 | 物理名 | キー | 頻度 | 抽出条件 | csvファイル名 |
| - | - | - | - | - | - | - | - | - |
| 1 | Weeklyitemリスト | WIL&WIL明細 | リソース | MDM_WKLY_SALITM<br>MDM_WKLY_SALITM_DTL | WIL番号 | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |
| 1 | ショウマスター | ショウマスター&ショウマスター明細 | リソース | SPM_SHW_MTR<br>SPM_SHW_MTR_DTL | ショウコード<br>ショウ明細連番 | 1時間毎 | 放映プラン日　>=ショウ明細開始日<br>放映プラン日　＜=ショウ明細終了日 | 同上 |
| 2 | 商品カテゴリ－ | カテゴリ－ | リソース | MDM_CTGR | カテゴリコード | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |
| 3 | 発注 | 発注&発注明細 | イベント | MDT_PO<br>MDT_PO_DTL | 発注番号<br>発注連番 | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |
| 4 | 取引先 | 取引先&取引先部門 | リソース | MDM_VDR<br>MDM_VDR_BRNCH | 取引先コード<br>取引先部門コード | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |
| 5 | 倉庫 | 倉庫 | リソース | FLM_WH_ORG | 倉庫コード | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |

