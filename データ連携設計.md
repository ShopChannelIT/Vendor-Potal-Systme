# 9.システム仕様

## データ連携 

### ■データ連携

基幹システム業務データをベンダーポータル(kintone)へ連携、ベンダーポータルから基幹システムへのデータ連携は、別項参照

![image](https://github.com/ShopChannelIT/Vendor-Portal/assets/88366591/6b1c0375-7fde-478c-a0d7-58f61d7a4c2d)

#### 基幹システム⇒CSVルール
| 項目 | 内容 | ポイント |
| - | - | - |
| データ連携要件 | ベンダーポータルに必要な条件の業務データを抽出しファイルサーバ(\\win-fil-01(O:))の所定フォルダへcsv形式で作成する |  |
| 連携データ作成方針 | 原則、DB定義書のレイアウトとおり作成する<br><br>-.リソース系データ：一意のキー単位へ加工し全項目を連携する。削除済データも連携する（削除フラグ＝１）<br><br>-.イベント系データ：ヘッダーと明細を結合し全項目を連携する。データ内の外部キー項目の結合はしない、削除済データも連携する（削除フラグ＝１） | 各データの一意のキーは■データ詳細参照<br><br>-.リソース系データ抽出条件<br>■データ詳細参照<br>-.イベント系データ抽出条件<br>■データ詳細参照 |
| 区分・フラグ・コード | リソースデータが存在しない区分値やフラグ等は、区分・名称管理マスターをCSV連携する | 区分・名称マスター参照ルールは別途記載する |
| 連携頻度 | ■データ詳細参照 | 18:00~翌9:30、土日は連携しない |
| CSV命名ルール<br>CSV更新方法 | 基幹システムの命名ルールに沿って新規作成する<br>過去連携したCSVファイルを上書きしない | 個人情報（仕入先担当者名）含むため、Kドライブを利用する |
| CSVファイルの文字コード | UTF-8 |  |
|  |  |  |

### ■データ詳細

| № | 業務データ | 論理名 | 分類 | 物理名 | キー | 頻度 | 抽出条件 | csvファイル名 |
| - | - | - | - | - | - | - | - | - |
| 1 | Weeklyitemリスト | WIL&WIL明細 | リソース | MDM_WKLY_SALITM<br>MDM_WKLY_SALITM_DTL | WIL番号 | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |
| 1 | ショウマスター | ショウマスター&ショウマスター明細 | リソース | SPM_SHW_MTR<br>SPM_SHW_MTR_DTL | ショウコード<br>ショウ明細連番 | 1時間毎 | 放映プラン日　>=ショウ明細開始日<br>放映プラン日　＜=ショウ明細終了日 | 同上 |
| 2 | 商品カテゴリ－ | カテゴリ－ | リソース | MDM_CTGR | カテゴリコード | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |
| 3 | 発注 | 発注&発注明細 | イベント | MDT_PO<br>MDT_PO_DTL | 発注番号<br>発注連番 | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |
| 4 | 取引先 | 取引先&取引先部門 | リソース | MDM_VDR<br>MDM_VDR_BRNCH | 取引先コード<br>取引先部門コード | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |
| 5 | 倉庫 | 倉庫 | リソース | FLM_WH_ORG | 倉庫コード | 1時間毎 | データ抽出処理実行日－10日＜＝データ作成・更新日 |  |

